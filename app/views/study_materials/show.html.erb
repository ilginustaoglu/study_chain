<div class="container" style="max-width: 900px; margin: 40px auto; padding: 20px;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1 style="color: #6F4E37; font-size: 2.5em;"><%= @study_material.title %></h1>
    <%= link_to "‚Üê Back", study_materials_path, class: "btn-back", style: "text-decoration: none; background: #6F4E37; color: white; padding: 10px 20px; border-radius: 5px; font-weight: bold;" %>
  </div>

  <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <% if @study_material.category.present? %>
      <div style="margin-bottom: 20px;">
        <span style="background: #3498db; color: white; padding: 8px 15px; border-radius: 5px; font-size: 0.9em; font-weight: bold;">
          üìÇ <%= @study_material.category %>
        </span>
      </div>
    <% end %>

    <% if @study_material.description.present? %>
      <div style="margin-bottom: 30px; padding: 20px; background: #ecf0f1; border-radius: 8px;">
        <h3 style="color: #6F4E37; margin-bottom: 10px;">Description:</h3>
        <p style="color: #34495e; line-height: 1.6; white-space: pre-wrap;"><%= @study_material.description %></p>
      </div>
    <% end %>

    <% if @study_material.files.attached? %>
      <div style="margin-top: 30px;">
        <h3 style="color: #6F4E37; margin-bottom: 15px;">üìé Attached Files (<%= @study_material.files.count %>):</h3>
        <div style="display: grid; gap: 15px;">
          <% @study_material.files.each do |file| %>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 2px solid #e9ecef;">
              <div>
                <% if file.content_type.start_with?('image/') %>
                  <span style="font-size: 1.5em;">üñºÔ∏è</span>
                <% elsif file.content_type == 'application/pdf' %>
                  <span style="font-size: 1.5em;">üìÑ</span>
                <% else %>
                  <span style="font-size: 1.5em;">üìé</span>
                <% end %>
                <strong style="margin-left: 10px; color: #6F4E37;"><%= file.filename %></strong>
                <span style="color: #7f8c8d; margin-left: 10px; font-size: 0.9em;">
                  (<%= number_to_human_size(file.byte_size) %>)
                </span>
              </div>
              <%= link_to "Download", rails_blob_path(file, disposition: "attachment"), style: "background: #3498db; color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-weight: bold;" %>
            </div>
            
            <% if file.content_type.start_with?('image/') %>
              <div style="margin-top: 10px; text-align: center;">
                <%= image_tag file, style: "max-width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <div style="display: flex; gap: 15px; margin-top: 30px; padding-top: 30px; border-top: 2px solid #ecf0f1;">
      <%= link_to "Edit", edit_study_material_path(@study_material), style: "flex: 1; text-align: center; background: #f39c12; color: white; padding: 15px; border-radius: 8px; text-decoration: none; font-weight: bold;" %>
      <%= link_to "Delete", study_material_path(@study_material), method: :delete, data: { confirm: "Are you sure you want to delete this study material?" }, style: "flex: 1; text-align: center; background: #e74c3c; color: white; padding: 15px; border-radius: 8px; text-decoration: none; font-weight: bold;" %>
    </div>
  </div>
</div>
